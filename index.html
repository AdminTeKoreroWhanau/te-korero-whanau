<!doctype html>
<html lang="mi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard â€” Te KÅrero WhÄnau</title>
    <meta name="description" content="Your whÄnau dashboard - stories, whakapapa, and more." />
    <link rel="stylesheet" href="assets/styles.css" />
  </head>
  <body>
    <header class="papa">
      <div class="logo">Te KÅrero WhÄnau</div>
      <nav>
        <button class="nav-toggle" aria-expanded="false" aria-controls="whanau-nav" title="Whakatuwhera tahua / Open menu">â‰¡</button>
        <button id="theme-toggle" class="theme-toggle" aria-pressed="false" title="KÅwhiri Ähua / Toggle theme">â˜€ï¸</button>
        <ul id="whanau-nav" class="nav-list">
          <li><a href="index.html">KÄinga</a></li>
          <li><a href="whakapapa.html">Whakapapa</a></li>
          <li><a href="korero.html">KÅrero</a></li>
          <li><a href="hui.html">Hui</a></li>
          <li><a href="mahi.html">Mahi</a></li>
          <li><a href="tauparapara.html">Tauparapara</a></li>
          <li><a href="nga-toi.html">NgÄ Toi</a></li>
          <li id="nav-admin-item" style="display:none"><a href="admin.html">Kaiwhakahaere</a></li>
          <li id="nav-login-item"><a id="open-auth" href="#">Takiuru</a></li>
          <li id="nav-profile-item" style="display:none"><a href="profile.html">KÅtaha</a></li>
          <li id="nav-signout-item" style="display:none"><a id="signout" href="#">Takiputa</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <!-- Welcome Section -->
      <section class="dashboard-welcome panel">
        <div class="welcome-content">
          <h1>NÄu mai, haere mai! ğŸŒ¿</h1>
          <p class="welcome-user">Kia ora, <span id="user-name">WhÄnau</span></p>
          <p class="muted">Welcome to your whÄnau dashboard</p>
        </div>
        <div class="welcome-date">
          <span class="date-day" id="current-day"></span>
          <span class="date-full" id="current-date"></span>
        </div>
      </section>

      <!-- Quick Actions (full width) -->
      <section class="panel quick-actions-bar">
        <h2>â• Quick Actions</h2>
        <div class="quick-actions-full">
          <a href="korero.html" class="qa-btn qa-story"><span class="qa-icon">ğŸ“–</span><span>Add a Story</span></a>
          <a href="whakapapa.html" class="qa-btn qa-whakapapa"><span class="qa-icon">ğŸŒ²</span><span>Update Whakapapa</span></a>
          <a href="nga-toi.html" class="qa-btn qa-photos"><span class="qa-icon">ğŸ¨</span><span>Upload Photos</span></a>
          <a href="hui.html" class="qa-btn qa-hui"><span class="qa-icon">ğŸ“…</span><span>Add an Event</span></a>
          <a href="tauparapara.html" class="qa-btn qa-tauparapara"><span class="qa-icon">ğŸ™</span><span>Tauparapara</span></a>
        </div>
      </section>

      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        <!-- Left Column -->
        <div class="dashboard-col">
          <!-- Quick Stats -->
          <section class="panel dashboard-stats">
            <h2>ğŸ“Š WhÄnau Stats</h2>
            <div class="stats-grid">
              <div class="stat-card">
                <span class="stat-icon">ğŸŒ²</span>
                <span class="stat-value" id="stat-members">--</span>
                <span class="stat-label">WhÄnau Members</span>
              </div>
              <div class="stat-card">
                <span class="stat-icon">ğŸ“–</span>
                <span class="stat-value" id="stat-stories">--</span>
                <span class="stat-label">Stories Shared</span>
              </div>
              <div class="stat-card">
                <span class="stat-icon">ğŸ–¼ï¸</span>
                <span class="stat-value" id="stat-photos">--</span>
                <span class="stat-label">Photos</span>
              </div>
              <div class="stat-card">
                <span class="stat-icon">ğŸµ</span>
                <span class="stat-value" id="stat-waiata">--</span>
                <span class="stat-label">Waiata</span>
              </div>
              <div class="stat-card">
                <span class="stat-icon">ğŸŒ³</span>
                <span class="stat-value" id="stat-whakapapa">--</span>
                <span class="stat-label">Whakapapa People</span>
              </div>
              <div class="stat-card">
                <span class="stat-icon">ğŸ™</span>
                <span class="stat-value" id="stat-tauparapara">--</span>
                <span class="stat-label">Tauparapara</span>
              </div>
            </div>
          </section>

        </div>

        <!-- Right Column -->
        <div class="dashboard-col">
          <!-- Recent Activity -->
          <section class="panel">
            <h2>ğŸ”” Recent Activity</h2>
            <div class="activity-feed" id="activity-feed">
              <p class="muted small">Loading activityâ€¦</p>
            </div>
          </section>
        </div>
      </div>

      <!-- Three-column sections -->
      <div class="dashboard-grid-3">
        <section class="panel">
          <h2>ğŸ‚ RÄ WhÄnau / Upcoming Birthdays</h2>
          <div id="dashboard-birthdays">
            <p class="muted small">Loadingâ€¦</p>
          </div>
        </section>

        <section class="panel">
          <h2>ğŸ‘‹ Recently Joined</h2>
          <div id="dashboard-recent-members">
            <p class="muted small">Loadingâ€¦</p>
          </div>
        </section>

        <section class="panel">
          <h2>ğŸ“… Upcoming Events</h2>
          <p class="muted small"><a href="hui.html">View all events â†’</a></p>
          <div class="dashboard-events" id="dashboard-events">
            <p class="muted small">Loading eventsâ€¦</p>
          </div>
        </section>

        <section class="panel maramataka-panel">
          <h2>ğŸŒ™ Maramataka</h2>
          <div id="dashboard-maramataka">
            <p class="muted small">Calculatingâ€¦</p>
          </div>
        </section>

        <section class="panel kupu-panel">
          <h2>ğŸ—£ï¸ Kupu o te RÄ</h2>
          <div id="dashboard-kupu">
            <p class="muted small">Loadingâ€¦</p>
          </div>
        </section>

        <section class="panel">
          <h2>ğŸ“– Latest KÅrero</h2>
          <div id="dashboard-latest-korero">
            <p class="muted small">Loadingâ€¦</p>
          </div>
          <p class="muted small" style="margin-top:.5rem"><a href="korero.html">View all stories â†’</a></p>
        </section>

        <section class="panel">
          <h2>ğŸ“¸ Recent Photos</h2>
          <div class="dash-photos-grid" id="dashboard-photos">
            <p class="muted small">Loadingâ€¦</p>
          </div>
          <p class="muted small" style="margin-top:.5rem"><a href="nga-toi.html">View all â†’</a></p>
        </section>

        <section class="panel whakatauki-panel">
          <h2>ğŸ’¬ WhakataukÄ« o te RÄ</h2>
          <blockquote class="whakatauki-quote">
            <p>"He aha te mea nui o te ao? He tangata, he tangata, he tangata."</p>
            <cite>What is the greatest thing in the world? It is people, it is people, it is people.</cite>
          </blockquote>
        </section>
      </div>
    </main>

    <footer>
      <small>Â© <span id="year"></span> Te KÅrero WhÄnau â€” He taonga tuku iho.</small>
    </footer>

    <!-- Auth modal -->
    <div id="auth-modal" class="modal" hidden aria-hidden="true" role="dialog" aria-labelledby="auth-title">
      <div class="modal-content">
        <button class="modal-close" aria-label="Katia te matapihi / Close" id="auth-close">Ã—</button>
        <h2 id="auth-title">Takiuru / RÄ“hita</h2>
        <div class="tabpanes">
          <form id="login-form" class="form" autocomplete="on">
            <label>Email
              <input type="email" name="email" required />
            </label>
            <label>Kupuhipa / Password
              <input type="password" name="password" required minlength="6" />
            </label>
            <button type="submit" class="btn">Takiuru</button>
            <p class="muted small" id="login-msg"></p>
          </form>
          <form id="register-form" class="form" autocomplete="on" hidden>
            <label>Ingoa / Full name (optional)
              <input type="text" name="full_name" />
            </label>
            <label>Email
              <input type="email" name="email" required />
            </label>
            <label>Kupuhipa / Password
              <input type="password" name="password" required minlength="6" />
            </label>
            <button type="submit" class="btn">RÄ“hita</button>
            <p class="muted small" id="register-msg"></p>
          </form>
        </div>
      </div>
    </div>

    <!-- Supabase JS and auth logic -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="assets/config.js"></script>
    <script src="assets/ui-auth-fallback.js"></script>
    <script src="assets/auth.js"></script>
    <script src="assets/whanau.js"></script>
    <script src="assets/app.js"></script>
    <script src="assets/dashboard.js"></script>
    <script src="assets/hui.js"></script>
  </body>
</html>
