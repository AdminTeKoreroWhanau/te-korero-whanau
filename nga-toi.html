<!doctype html>
<html lang="mi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ngā Toi — Te Kōrero Whānau</title>
    <meta name="description" content="Ngā Toi / Media: Gallery of photos and videos." />
    <link rel="stylesheet" href="assets/styles.css" />
  </head>
  <body>
    <header class="papa">
      <div class="logo">Te Kōrero Whānau</div>
      <nav>
        <button class="nav-toggle" aria-expanded="false" aria-controls="whanau-nav" title="Whakatuwhera tahua / Open menu">≡</button>
        <button id="theme-toggle" class="theme-toggle" aria-pressed="false" title="Kōwhiri āhua / Toggle theme">☀︎</button>
        <ul id="whanau-nav" class="nav-list">
          <li><a href="index.html">Kāinga</a></li>
          <li><a href="whakapapa.html">Whakapapa</a></li>
          <li><a href="korero.html">Kōrero</a></li>
          <li><a href="hui.html">Hui</a></li>
          <li><a href="mahi.html">Mahi</a></li>
          <li><a href="tauparapara.html">Tauparapara</a></li>
          <li><a href="nga-toi.html">Ngā Toi</a></li>
          <li id="nav-admin-item" style="display:none"><a href="admin.html">Kaiwhakahaere</a></li>
          <li id="nav-login-item"><a id="open-auth" href="#">Takiuru</a></li>
          <li id="nav-profile-item" style="display:none"><a href="profile.html">Kōtaha</a></li>
          <li id="nav-signout-item" style="display:none"><a id="signout" href="#">Takiputa</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <section id="nga-toi" class="panel">
        <h1>Ngā Toi / Media</h1>
        <figure class="hero-figure">
          <img loading="lazy" decoding="async" referrerpolicy="no-referrer" alt="Whānau photoshoot outdoors — capturing photos and video" src="https://source.unsplash.com/1200x420/?maori,whanau,photoshoot,photography,outdoors" onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1520813792240-56fc4a3765a7?auto=format&fit=crop&w=1200&h=420&q=80';" />
          <figcaption class="visually-hidden">Whānau photoshoot outdoors</figcaption>
        </figure>
        <p>Photos and videos: marae-style gallery layout. B-roll of kāinga, awa, maunga, and homesteads.</p>
        <p class="muted">Tip: Click an image to open in a lightbox.</p>
        <div class="gallery">
          <figure>
            <img loading="lazy" decoding="async" alt="Maunga (mountain)" src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=900&h=600&q=80" />
            <figcaption>Maunga</figcaption>
          </figure>
          <figure>
            <img loading="lazy" decoding="async" alt="Awa (river)" src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=900&h=600&q=80" />
            <figcaption>Awa</figcaption>
          </figure>
          <figure>
            <img loading="lazy" decoding="async" alt="Moana (ocean)" src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=900&h=600&q=80" />
            <figcaption>Moana</figcaption>
          </figure>
          <figure>
            <img loading="lazy" decoding="async" alt="Ngahere (forest)" src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=900&h=600&q=80" />
            <figcaption>Ngāhere</figcaption>
          </figure>
          <figure>
            <img loading="lazy" decoding="async" alt="Kāinga (home)" src="https://images.unsplash.com/photo-1501183638710-841dd1904471?auto=format&fit=crop&w=900&h=600&q=80" />
            <figcaption>Kāinga</figcaption>
          </figure>
          <figure>
            <img loading="lazy" decoding="async" alt="Ahi (fire)" src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=900&h=600&q=80" />
            <figcaption>Ahi</figcaption>
          </figure>
        </div>

        <section id="ngatoi-upload" class="panel" aria-labelledby="ngatoi-upload-heading" style="margin-top:1rem">
          <h2 id="ngatoi-upload-heading">Tāpiri whakaahua / Add photos to the gallery</h2>
          <p class="small muted">Uploads are stored locally by default. If Supabase is configured in <code>assets/config.js</code>, photos are shared with whānau.</p>
          <form id="form-art" class="form">
            <label>
              <span>Title</span>
              <input type="text" id="art-title" placeholder="He whakaahua..." required />
            </label>
            <label>
              <span>Contributor</span>
              <input type="text" id="art-author" placeholder="Ko wai?" />
            </label>
            <label>
              <span>Image file (jpg, png, webp)</span>
              <input type="file" id="art-file" accept="image/*" required />
            </label>
            <button type="submit" class="btn">Tuku / Upload</button>
          </form>
        </section>
      </section>
      
      <section id="waiata" class="panel">
        <h1>Waiata</h1>
        <figure class="hero-figure">
          <img loading="lazy" decoding="async" referrerpolicy="no-referrer" alt="Taonga pūoro / Guitar symbolising waiata" src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&w=1200&h=420&q=80" onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1200&h=420&q=80';" />
          <figcaption class="visually-hidden">Guitar for song</figcaption>
        </figure>
        <p>Recordings and lyrics to support learning and whakanui i te reo me ngā tikanga.</p>
        <details class="fold">
          <summary>Practice tips</summary>
          <p>Start slow, learn kupu first, then add melody. Record your progress to share with whānau.</p>
        </details>

        <section id="waiata-showcase" class="panel" aria-labelledby="waiata-showcase-heading">
          <h2 id="waiata-showcase-heading">Ngā Tirohanga / Previews</h2>
          <div class="slideshow" id="waiata-slideshow">
            <div class="slides" id="waiata-slides">
              <div class="slide">
                <article class="card">
                  <div class="card-body">
                    <div><span class="tag">Audio</span></div>
                    <h3>E Rere Rā (example)</h3>
                    <p class="meta">Whānau Aroha</p>
                  </div>
                </article>
              </div>
              <div class="slide">
                <article class="card">
                  <div class="card-body">
                    <div><span class="tag">Lyrics</span></div>
                    <h3>Tūtira Mai Ngā Iwi (example)</h3>
                    <p class="meta">"Tūtira mai ngā iwi, tātou tātou e..."</p>
                  </div>
                </article>
              </div>
            </div>
            <div class="slide-nav">
              <button type="button" id="waiata-prev" aria-label="Previous">‹</button>
              <button type="button" id="waiata-next" aria-label="Next">›</button>
            </div>
            <div class="slide-dots" id="waiata-dots" aria-hidden="true"></div>
          </div>
        </section>

        <section id="waiata-upload" class="panel" aria-labelledby="upload-heading">
          <h2 id="upload-heading">Tāpiri waiata, kupu hoki / Add songs or lyrics</h2>
          <p class="small muted">Uploads are stored on your device (no server). Share your device to show whānau.</p>
          <div class="tabpanes">
            <form id="form-audio" class="form">
              <label>
                <span>Title</span>
                <input type="text" id="audio-title" placeholder="He waiata..." required />
              </label>
              <label>
                <span>Contributor</span>
                <input type="text" id="audio-author" placeholder="Ko wai?" />
              </label>
              <label>
                <span>Audio file (mp3, m4a, wav)</span>
                <input type="file" id="audio-file" accept="audio/*" required />
              </label>
              <button type="submit" class="btn">Tuku / Upload</button>
            </form>

            <form id="form-lyrics" class="form">
              <label>
                <span>Title</span>
                <input type="text" id="lyrics-title" placeholder="He waiata, he karakia..." required />
              </label>
              <label>
                <span>Contributor</span>
                <input type="text" id="lyrics-author" placeholder="Ko wai?" />
              </label>
              <label>
                <span>Lyrics</span>
                <textarea id="lyrics-text" rows="6" placeholder="Tāuruhia ngā kupu..." required></textarea>
              </label>
              <button type="submit" class="btn">Tuku / Upload</button>
            </form>
          </div>
        </section>

        <section id="waiata-browse" class="panel" aria-labelledby="browse-heading">
          <h2 id="browse-heading">Tirohia ngā tāpiritanga / Browse uploads</h2>
          <input id="waiata-search" type="text" placeholder="Rapua te taitara, kaituhi, kupu..." aria-label="Search waiata" />
          <div id="waiata-list" class="cards" aria-live="polite" aria-busy="false"></div>
          <p id="waiata-empty" class="muted small">Kāore anō he tāpiritanga. Tāpiri he waiata, he kupu ki runga ake nei.</p>
        </section>

      </section>
    </main>

    <footer>
      <small>© <span id="year"></span> Te Kōrero Whānau — He taonga tuku iho.</small>
    </footer>

    <div id="lightbox" class="lightbox" hidden aria-hidden="true" role="dialog" aria-label="image viewer">
      <button class="lightbox-close" title="Katia / Close">×</button>
      <img alt="" />
    </div>

    <!-- Auth modal -->
    <div id="auth-modal" class="modal" hidden aria-hidden="true" role="dialog" aria-labelledby="auth-title">
      <div class="modal-content">
        <button class="modal-close" aria-label="Katia te matapihi / Close" id="auth-close">×</button>
        <h2 id="auth-title">Takiuru / Rēhita</h2>
        <div class="tabpanes">
          <form id="login-form" class="form" autocomplete="on">
            <label>Email
              <input type="email" name="email" required />
            </label>
            <label>Kupuhipa / Password
              <input type="password" name="password" required minlength="6" />
            </label>
            <button type="submit" class="btn">Takiuru</button>
            <p class="muted small" id="login-msg"></p>
          </form>
          <form id="register-form" class="form" autocomplete="on" hidden>
            <label>Ingoa / Full name (optional)
              <input type="text" name="full_name" />
            </label>
            <label>Email
              <input type="email" name="email" required />
            </label>
            <label>Kupuhipa / Password
              <input type="password" name="password" required minlength="6" />
            </label>
            <button type="submit" class="btn">Rēhita</button>
            <p class="muted small" id="register-msg"></p>
          </form>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="assets/config.js"></script>
    <script src="assets/auth.js"></script>
    <script src="assets/whanau.js"></script>
    <script src="assets/app.js"></script>
    <script src="assets/backend.js"></script>
    <script src="assets/waiata.js"></script>
  </body>
</html>
